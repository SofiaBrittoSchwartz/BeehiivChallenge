(this.webpackJsonpchallenge=this.webpackJsonpchallenge||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(25),r=n.n(c),l=n(2),i=n(26),o=n(3),d=n(8),b=n(9),u=n(15),m=n(6),j=n.n(m),x=n(0),h=function(e){return Object(x.jsxs)("svg",{className:j()("animate-spin",e.className,"h-5 w-5","text-".concat(e.color)),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Object(x.jsx)("circle",{className:"opacity-25",cx:12,cy:12,r:10,stroke:"currentColor",strokeWidth:4}),Object(x.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})};h.defaultProps={color:"gray-900",className:void 0};var p=h;function g(e){var t=e.children,n=e.className,s=e.loading,a=e.disabled,c=Object(u.a)(e,["children","className","loading","disabled"]);return Object(x.jsxs)("button",Object(b.a)(Object(b.a)({type:"button",className:j()("relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",n),disabled:a||s},c),{},{children:[s&&Object(x.jsx)(p,{className:"mr-3",color:"white"}),t]}))}function v(e){var t=e.children,n=e.className,s=e.loading,a=e.disabled,c=Object(u.a)(e,["children","className","loading","disabled"]);return Object(x.jsxs)("button",Object(b.a)(Object(b.a)({type:"button",className:j()("relative inline-flex items-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md bg-blue-500 hover:bg-blue-700 text-white",n),disabled:a||s},c),{},{children:[s&&Object(x.jsx)(p,{className:"mr-3",color:"white"}),t]}))}function f(e){var t=e.children;return Object(x.jsx)("div",{className:"relative p-6 flex-auto",children:t})}function O(e){var t=e.children;return Object(x.jsx)("div",{className:"flex items-center justify-end p-6 border-t border-solid border-blueGray-200 rounded-b",children:t})}function y(e){var t=e.modalTitle,n=e.children,s=e.showModal,a=e.onCloseModal;return Object(x.jsx)(x.Fragment,{children:s?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none",children:Object(x.jsx)("div",{className:"relative my-6 mx-auto w-full max-w-md",children:Object(x.jsxs)("div",{className:"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none",children:[Object(x.jsxs)("div",{className:"flex items-start justify-between p-5 border-b border-solid border-blueGray-200 rounded-t",children:[Object(x.jsx)("h3",{className:"text-2xl font-semibold",children:t}),Object(x.jsx)("button",{className:"p-1 ml-auto bg-transparent border-0 text-black float-right text-3xl leading-none font-semibold outline-none focus:outline-none",onClick:a,children:Object(x.jsx)("span",{className:"bg-transparent text-black opacity-3 h-6 w-6 text-1xl block outline-none focus:outline-none",children:"\xd7"})})]}),n]})})}),Object(x.jsx)("div",{className:"opacity-25 fixed inset-0 z-40 bg-black"})]}):null})}var w=n(46),N=function(e){var t=e.isOpen,n=e.onClose,a=e.onSuccess,c=Object(s.useState)(!1),r=Object(o.a)(c,2),l=r[0],i=r[1],d=Object(s.useState)(""),b=Object(o.a)(d,2),u=b[0],m=b[1],j=Object(s.useState)(""),h=Object(o.a)(j,2),p=h[0],N=h[1],S=Object(s.useState)({email:"",name:""}),C=Object(o.a)(S,2),k=C[0],P=C[1],M=function(e){var t=e.target,n=t.name,s=t.value;"email"===n?m(s):"name"===n&&N(s)};return Object(x.jsx)(y,{modalTitle:"Add Subscriber",showModal:t,onCloseModal:n,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f,{children:Object(x.jsxs)("form",{className:"my-4 text-blueGray-500 text-lg leading-relaxed",children:[Object(x.jsxs)("div",{className:"mb-4",children:[Object(x.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email*"}),Object(x.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"email",type:"email",placeholder:"rickc137@citadel.com",onChange:M,value:u}),k.email&&Object(x.jsx)("span",{className:"error",children:k.email})]}),Object(x.jsxs)("div",{className:"mb-4",children:[Object(x.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),Object(x.jsx)("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",name:"name",type:"text",placeholder:"Rick Sanchez",onChange:M,value:p}),k.name&&Object(x.jsx)("span",{className:"error",children:k.name})]})]})}),Object(x.jsxs)(O,{children:[Object(x.jsx)(g,{className:"background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none mr-1",type:"button",onClick:n,children:"Cancel"}),Object(x.jsx)(v,{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold uppercase",type:"button",onClick:function(){(function(){var e={email:"",name:""};return p||(e.name="Name is required"),u?/\S+@\S+\.\S+/.test(u)||(e.email="Invalid email format"):e.email="Email is required",P(e),Object.values(e).every((function(e){return""===e}))})()?console.log("Form submitted successfully."):console.log("Form contains errors. Please double check inputs.");var e={email:u,name:p};i(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={"Content-Type":"application/json"};return w.post("/api/subscribers",e,{headers:t})}(e).then((function(){a(),window.location.reload(!1)})).catch((function(e){var t,n,s=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong";console.error(s)})).finally((function(){i(!1)}))},loading:l,children:"Add Subscriber"})]})]})})},S=function(e){var t=e.isOpen,n=e.onSuccess,a=e.onClose,c=e.subscriberId,r=e.status,l=Object(s.useState)(!1),i=Object(o.a)(l,2),d=i[0],b=i[1],u=Object(s.useState)(""),m=Object(o.a)(u,2),j=m[0],h=m[1],p="active"===r?"Unsubscribe":"Resubscribe",N="active"===r?"Are you sure you'd like to unsubscribe this subscriber?":"Are you sure you'd like to resubscribe this subscriber?",S="active"===r?"Unsubscribe":"Resubscribe";return Object(x.jsx)(y,{modalTitle:p,showModal:t,onCloseModal:a,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(f,{children:[N,j&&Object(x.jsx)("span",{className:"error",children:j})]}),Object(x.jsxs)(O,{children:[Object(x.jsx)(g,{className:"mx-2",onClick:a,children:"Cancel"}),Object(x.jsx)(v,{type:"primary",loading:d,onClick:function(){var e={isSubscribed:!("active"===r)};b(!0),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={"Content-Type":"application/json"};return w.patch("/api/subscribers/".concat(e),t,{headers:n})}(c,e).then((function(){n(),window.location.reload(!1)})).catch((function(e){var t,n,s=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong";console.error(s),h("An error occurred. Please reload the page and try again.")})).finally((function(){b(!1)}))},children:S})]})]})})};var C=function(e){var t=e.value,n=t?t.toLowerCase():"unknown";return Object(x.jsx)("span",{className:j()("px-3 py-1 uppercase leading-wide font-bold text-xs rounded-full shadow-sm",n.startsWith("active")?"bg-green-100 text-green-800":null,n.startsWith("inactive")?"bg-yellow-100 text-yellow-800":null),children:n})},k=function(e){var t=e.subscribers,n=e.onChangeStatusSelected;return Object(x.jsx)("div",{className:"flex flex-col",children:Object(x.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(x.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(x.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(x.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(x.jsx)("thead",{className:"bg-gray-50",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),Object(x.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),Object(x.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object(x.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(x.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),Object(x.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(x.jsx)("div",{className:"text-sm text-gray-900",children:e.name})}),Object(x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(x.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),Object(x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(x.jsx)(C,{value:e.isSubscribed?"Subscribed":"Unsubscribed"})}),Object(x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(x.jsx)("button",{className:"text-primary-gold-600 hover:text-primary-gold-900 underline",onClick:function(){return n(e.id,e.isSubscribed?"active":"inactive")},children:e.isSubscribed?"Unsubscribe":"Subscribe"})})]},e.id)}))})]})})})})})};k.defaultProps={subscribers:[],onChangeStatusSelected:function(){}};var P=k,M=Object(x.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(x.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),R=Object(x.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:Object(x.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),z=function(e){var t=e.pagination,n=e.onPageSelected,s=function(){var e=null===t||void 0===t?void 0:t.page,s=null===t||void 0===t?void 0:t.total_pages,c=s>5?5:s,r=1;e>2&&s>5&&(r=e-2);for(var l=[],i=function(t){t<=s&&l.push(Object(x.jsx)("button",{"aria-current":t===e,className:t===e?"z-10 bg-primary-gold-50 border-primary-gold-500 text-primary-gold-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium",onClick:function(){return n(t)},children:t},"page-".concat(t)))},o=r;o<r+c;o++)i(o);return Object(x.jsx)(a.a.Fragment,{children:l})};return function(){var a=e.insideCard,c=null===t||void 0===t?void 0:t.total,r=null===t||void 0===t?void 0:t.page,l=null===t||void 0===t?void 0:t.total_pages,i=r+1>l?l:r+1,o=r-1<1?1:r-1;return Object(x.jsxs)("div",{className:j()("py-3 flex items-center justify-between",a?"bg-white border-t border-gray-200":""),children:[Object(x.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[Object(x.jsx)("button",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:function(){return n(o)},children:"Previous"}),Object(x.jsx)("button",{className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",onClick:function(){return n(i)},children:"Next"})]}),Object(x.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[Object(x.jsx)("div",{children:Object(x.jsxs)("p",{className:"text-sm text-gray-700",children:[Object(x.jsxs)("span",{className:"font-medium",children:[c,"\xa0"]}),"results"]})}),Object(x.jsx)("div",{children:Object(x.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[Object(x.jsxs)("button",{className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:function(){return n(o)},children:[Object(x.jsx)("span",{className:"sr-only",children:"Previous"}),M]}),s(),Object(x.jsxs)("button",{className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",onClick:function(){return n(i)},children:[Object(x.jsx)("span",{className:"sr-only",children:"Next"}),R]})]})})]})]})}()};z.defaultProps={pagination:{},insideCard:!1};var F=z;n(65);var A=function(){var e=Object(d.c)("page",Object(d.d)(d.a,1)),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(d.c)("perPage",Object(d.d)(d.a,25)),r=Object(o.a)(c,1)[0],l=Object(s.useState)(!1),i=Object(o.a)(l,2),b=i[0],u=i[1],m=Object(s.useState)(""),j=Object(o.a)(m,2),h=j[0],v=j[1],f=Object(s.useState)(""),O=Object(o.a)(f,2),y=O[0],C=O[1],k=Object(s.useState)([]),M=Object(o.a)(k,2),R=M[0],z=M[1],A=Object(s.useState)({}),E=Object(o.a)(A,2),T=E[0],B=E[1],I=Object(s.useState)(!1),U=Object(o.a)(I,2),G=U[0],L=U[1],W=Object(s.useCallback)((function(){var e={page:n,per_page:r};L(!0),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={"Content-Type":"application/json"};return w.get("/api/subscribers",{params:e,headers:t})}(e).then((function(e){var t,n,s=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.subscribers)||[],a=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.pagination)||{};z(s),B(a)})).catch((function(e){var t,n,s=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Something went wrong";console.error(s)})).finally((function(){L(!1)}))}),[n,r]);return Object(s.useEffect)((function(){W()}),[W]),Object(x.jsx)("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:Object(x.jsxs)("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 pt-4",children:[Object(x.jsx)(N,{isOpen:b,onClose:function(){u(!1)},onSuccess:function(){u(!1)}}),Object(x.jsx)(S,{isOpen:""!==h&&""!==y,onClose:function(){v(""),C("")},onSuccess:function(){v(""),C("")},subscriberId:h,status:y}),Object(x.jsxs)("div",{className:"flex justify-between items-center",children:[Object(x.jsxs)("h1",{className:"text-xl font-semibold flex items-center",children:[null===T||void 0===T?void 0:T.total," Subscribers ",G&&Object(x.jsx)(p,{className:"ml-4"})]}),Object(x.jsx)(g,{onClick:function(){u(!0)},children:"Add Subscriber"})]}),Object(x.jsxs)("div",{className:"mt-6",children:[Object(x.jsx)(P,{subscribers:R,onChangeStatusSelected:function(e,t){v(e),C(t)}}),Object(x.jsx)(F,{pagination:T,onPageSelected:function(e){a(e)}})]})]})})};n(66);r.a.render(Object(x.jsx)(i.a,{children:Object(x.jsx)(d.b,{ReactRouterRoute:function(e){var t=e.children,n=Object(l.d)(),s=Object(l.c)();return t({history:a.a.useMemo((function(){return{replace:function(e){n(e,{replace:!0,state:e.state})},push:function(e){n(e,{replace:!1,state:e.state})}}}),[n]),location:s})},children:Object(x.jsx)(A,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.2ee4be1a.chunk.js.map